<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EnigmaIOT: HASwitch Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo text inside.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EnigmaIOT
   &#160;<span id="projectnumber">0.9.8</span>
   </div>
   <div id="projectbrief">Secure sensor and gateway platform based on ESP8266 and ESP32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classHASwitch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">HASwitch Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="haSwitch_8h_source.html">haSwitch.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for HASwitch:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classHASwitch.png" usemap="#HASwitch_map" alt=""/>
  <map id="HASwitch_map" name="HASwitch_map">
<area href="classHAEntity.html" alt="HAEntity" shape="rect" coords="0,0,67,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a282ac7ec44e7fc43d0d6493808e68ba3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#a282ac7ec44e7fc43d0d6493808e68ba3">HASwitch</a> ()</td></tr>
<tr class="memdesc:a282ac7ec44e7fc43d0d6493808e68ba3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch constructor.  <a href="classHASwitch.html#a282ac7ec44e7fc43d0d6493808e68ba3">More...</a><br /></td></tr>
<tr class="separator:a282ac7ec44e7fc43d0d6493808e68ba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58d4755d08863514f81805d29d96605b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#a58d4755d08863514f81805d29d96605b">setPayloadOn</a> (const char *payload)</td></tr>
<tr class="memdesc:a58d4755d08863514f81805d29d96605b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The payload that represents on state. If specified, will be used for both comparing to the value in the state_topic (see value_template and state_on for details) and sending as on command to the command_topic <a href="https://www.home-assistant.io/integrations/switch.mqtt/#payload_on">https://www.home-assistant.io/integrations/switch.mqtt/#payload_on</a>.  <a href="classHASwitch.html#a58d4755d08863514f81805d29d96605b">More...</a><br /></td></tr>
<tr class="separator:a58d4755d08863514f81805d29d96605b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad34555ca78f7d9c9ccd49139751ed831"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#ad34555ca78f7d9c9ccd49139751ed831">setPayloadOff</a> (const char *payload)</td></tr>
<tr class="memdesc:ad34555ca78f7d9c9ccd49139751ed831"><td class="mdescLeft">&#160;</td><td class="mdescRight">The payload that represents off state. If specified, will be used for both comparing to the value in the state_topic (see value_template and state_off for details) and sending as on command to the command_topic <a href="https://www.home-assistant.io/integrations/switch.mqtt/#payload_off">https://www.home-assistant.io/integrations/switch.mqtt/#payload_off</a>.  <a href="classHASwitch.html#ad34555ca78f7d9c9ccd49139751ed831">More...</a><br /></td></tr>
<tr class="separator:ad34555ca78f7d9c9ccd49139751ed831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb657f3c1e7a6d0dd201ae1ae58c4c61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#adb657f3c1e7a6d0dd201ae1ae58c4c61">setPayloadOn</a> (int payload)</td></tr>
<tr class="memdesc:adb657f3c1e7a6d0dd201ae1ae58c4c61"><td class="mdescLeft">&#160;</td><td class="mdescRight">The payload that represents on state. If specified, will be used for both comparing to the value in the state_topic (see value_template and state_on for details) and sending as on command to the command_topic <a href="https://www.home-assistant.io/integrations/switch.mqtt/#payload_on">https://www.home-assistant.io/integrations/switch.mqtt/#payload_on</a>.  <a href="classHASwitch.html#adb657f3c1e7a6d0dd201ae1ae58c4c61">More...</a><br /></td></tr>
<tr class="separator:adb657f3c1e7a6d0dd201ae1ae58c4c61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87f7ed8d117684176195abb75de10fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#ad87f7ed8d117684176195abb75de10fd">setPayloadOff</a> (int payload)</td></tr>
<tr class="memdesc:ad87f7ed8d117684176195abb75de10fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The payload that represents off state. If specified, will be used for both comparing to the value in the state_topic (see value_template and state_off for details) and sending as on command to the command_topic <a href="https://www.home-assistant.io/integrations/switch.mqtt/#payload_off">https://www.home-assistant.io/integrations/switch.mqtt/#payload_off</a>.  <a href="classHASwitch.html#ad87f7ed8d117684176195abb75de10fd">More...</a><br /></td></tr>
<tr class="separator:ad87f7ed8d117684176195abb75de10fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa59604bf62e63caaf3dcd6a2ad67814f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#aa59604bf62e63caaf3dcd6a2ad67814f">setStateOn</a> (const char *payload)</td></tr>
<tr class="memdesc:aa59604bf62e63caaf3dcd6a2ad67814f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The payload that represents the on state. Used when value that represents on state in the state_topic is different from value that should be sent to the command_topic to turn the device on <a href="https://www.home-assistant.io/integrations/switch.mqtt/#state_on">https://www.home-assistant.io/integrations/switch.mqtt/#state_on</a>.  <a href="classHASwitch.html#aa59604bf62e63caaf3dcd6a2ad67814f">More...</a><br /></td></tr>
<tr class="separator:aa59604bf62e63caaf3dcd6a2ad67814f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8498809d5a4ba56039c8397e1c22f272"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#a8498809d5a4ba56039c8397e1c22f272">setStateOff</a> (const char *payload)</td></tr>
<tr class="memdesc:a8498809d5a4ba56039c8397e1c22f272"><td class="mdescLeft">&#160;</td><td class="mdescRight">The payload that represents the off state. Used when value that represents off state in the state_topic is different from value that should be sent to the command_topic to turn the device off <a href="https://www.home-assistant.io/integrations/switch.mqtt/#state_off">https://www.home-assistant.io/integrations/switch.mqtt/#state_off</a>.  <a href="classHASwitch.html#a8498809d5a4ba56039c8397e1c22f272">More...</a><br /></td></tr>
<tr class="separator:a8498809d5a4ba56039c8397e1c22f272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a83e4675f294b203737539245e13c34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#a8a83e4675f294b203737539245e13c34">setStateOn</a> (int payload)</td></tr>
<tr class="memdesc:a8a83e4675f294b203737539245e13c34"><td class="mdescLeft">&#160;</td><td class="mdescRight">The payload that represents the on state. Used when value that represents on state in the state_topic is different from value that should be sent to the command_topic to turn the device on <a href="https://www.home-assistant.io/integrations/switch.mqtt/#state_on">https://www.home-assistant.io/integrations/switch.mqtt/#state_on</a>.  <a href="classHASwitch.html#a8a83e4675f294b203737539245e13c34">More...</a><br /></td></tr>
<tr class="separator:a8a83e4675f294b203737539245e13c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92d97f25fd24278191e3ded747f1eac9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#a92d97f25fd24278191e3ded747f1eac9">setStateOff</a> (int payload)</td></tr>
<tr class="memdesc:a92d97f25fd24278191e3ded747f1eac9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The payload that represents the off state. Used when value that represents off state in the state_topic is different from value that should be sent to the command_topic to turn the device off <a href="https://www.home-assistant.io/integrations/switch.mqtt/#state_off">https://www.home-assistant.io/integrations/switch.mqtt/#state_off</a>.  <a href="classHASwitch.html#a92d97f25fd24278191e3ded747f1eac9">More...</a><br /></td></tr>
<tr class="separator:a92d97f25fd24278191e3ded747f1eac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a237b5b70434642df1031dac738955634"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#a237b5b70434642df1031dac738955634">setValueField</a> (const char *payload)</td></tr>
<tr class="memdesc:a237b5b70434642df1031dac738955634"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines a json key to extract device’s state from the state_topic. To determine the switches’s state result of this template will be compared to state_on and state_off <a href="https://www.home-assistant.io/integrations/switch.mqtt/#value_template">https://www.home-assistant.io/integrations/switch.mqtt/#value_template</a>.  <a href="classHASwitch.html#a237b5b70434642df1031dac738955634">More...</a><br /></td></tr>
<tr class="separator:a237b5b70434642df1031dac738955634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classHAEntity"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classHAEntity')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classHAEntity.html">HAEntity</a></td></tr>
<tr class="memitem:a64140dc1e3e041eafbcd6eca04abb9ef inherit pub_methods_classHAEntity"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHAEntity.html#a64140dc1e3e041eafbcd6eca04abb9ef">getAnounceMessage</a> (int bufferlen, uint8_t *buffer)</td></tr>
<tr class="memdesc:a64140dc1e3e041eafbcd6eca04abb9ef inherit pub_methods_classHAEntity"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets entity anounce message to be sent over EnigmaIOT message.  <a href="classHAEntity.html#a64140dc1e3e041eafbcd6eca04abb9ef">More...</a><br /></td></tr>
<tr class="separator:a64140dc1e3e041eafbcd6eca04abb9ef inherit pub_methods_classHAEntity"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bd8a543ed665f9e48ca47b220123063 inherit pub_methods_classHAEntity"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHAEntity.html#a1bd8a543ed665f9e48ca47b220123063">setNameSufix</a> (const char *payload)</td></tr>
<tr class="memdesc:a1bd8a543ed665f9e48ca47b220123063 inherit pub_methods_classHAEntity"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets name suffix. Used for multi entity nodes.  <a href="classHAEntity.html#a1bd8a543ed665f9e48ca47b220123063">More...</a><br /></td></tr>
<tr class="separator:a1bd8a543ed665f9e48ca47b220123063 inherit pub_methods_classHAEntity"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b81d38a3d72a0848b81f6d240b781da inherit pub_methods_classHAEntity"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHAEntity.html#a2b81d38a3d72a0848b81f6d240b781da">allowSendAttributes</a> ()</td></tr>
<tr class="memdesc:a2b81d38a3d72a0848b81f6d240b781da inherit pub_methods_classHAEntity"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables registering entity attributes as a json object.  <a href="classHAEntity.html#a2b81d38a3d72a0848b81f6d240b781da">More...</a><br /></td></tr>
<tr class="separator:a2b81d38a3d72a0848b81f6d240b781da inherit pub_methods_classHAEntity"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad299ecdb73519da56e2f5439941af544 inherit pub_methods_classHAEntity"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHAEntity.html#ad299ecdb73519da56e2f5439941af544">measureMessage</a> ()</td></tr>
<tr class="memdesc:ad299ecdb73519da56e2f5439941af544 inherit pub_methods_classHAEntity"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets needed buffer size for discovery message.  <a href="classHAEntity.html#ad299ecdb73519da56e2f5439941af544">More...</a><br /></td></tr>
<tr class="separator:ad299ecdb73519da56e2f5439941af544 inherit pub_methods_classHAEntity"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a6f1fba7f12792a5a622de9db17cd2bc9"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHASwitch.html#a6f1fba7f12792a5a622de9db17cd2bc9">getDiscoveryJson</a> (char *buffer, size_t buflen, const char *nodeName, const char *networkName, DynamicJsonDocument *inputJSON)</td></tr>
<tr class="memdesc:a6f1fba7f12792a5a622de9db17cd2bc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows Gateway to get Home Assistant discovery message using Switch template.  <a href="classHASwitch.html#a6f1fba7f12792a5a622de9db17cd2bc9">More...</a><br /></td></tr>
<tr class="separator:a6f1fba7f12792a5a622de9db17cd2bc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_classHAEntity"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classHAEntity')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classHAEntity.html">HAEntity</a></td></tr>
<tr class="memitem:ac083c92c7973db1f2b51ede001768f2f inherit pub_static_methods_classHAEntity"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHAEntity.html#ac083c92c7973db1f2b51ede001768f2f">deviceTypeStr</a> (<a class="el" href="haEntity_8h.html#aa0743062e1533ced64df39be6177d76d">haDeviceType_t</a> entityType)</td></tr>
<tr class="memdesc:ac083c92c7973db1f2b51ede001768f2f inherit pub_static_methods_classHAEntity"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets entity type string from haDeviceType_t value <a href="https://www.home-assistant.io/docs/mqtt/discovery/">https://www.home-assistant.io/docs/mqtt/discovery/</a>.  <a href="classHAEntity.html#ac083c92c7973db1f2b51ede001768f2f">More...</a><br /></td></tr>
<tr class="separator:ac083c92c7973db1f2b51ede001768f2f inherit pub_static_methods_classHAEntity"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a264a9779679d77db65566233a952100d inherit pub_static_methods_classHAEntity"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHAEntity.html#a264a9779679d77db65566233a952100d">getDiscoveryTopic</a> (const char *hassPrefix, const char *nodeName, <a class="el" href="haEntity_8h.html#aa0743062e1533ced64df39be6177d76d">haDeviceType_t</a> entityType, const char *nameSuffix=NULL)</td></tr>
<tr class="memdesc:a264a9779679d77db65566233a952100d inherit pub_static_methods_classHAEntity"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows Gateway to get discovery message MQTT topic.  <a href="classHAEntity.html#a264a9779679d77db65566233a952100d">More...</a><br /></td></tr>
<tr class="separator:a264a9779679d77db65566233a952100d inherit pub_static_methods_classHAEntity"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classHAEntity"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classHAEntity')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classHAEntity.html">HAEntity</a></td></tr>
<tr class="memitem:a1e3da7d22fd155a3661f754b9b1f64a3 inherit pro_methods_classHAEntity"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHAEntity.html#a1e3da7d22fd155a3661f754b9b1f64a3">HAEntity</a> ()</td></tr>
<tr class="memdesc:a1e3da7d22fd155a3661f754b9b1f64a3 inherit pro_methods_classHAEntity"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. Needed for inheritance.  <a href="classHAEntity.html#a1e3da7d22fd155a3661f754b9b1f64a3">More...</a><br /></td></tr>
<tr class="separator:a1e3da7d22fd155a3661f754b9b1f64a3 inherit pro_methods_classHAEntity"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classHAEntity"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classHAEntity')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classHAEntity.html">HAEntity</a></td></tr>
<tr class="memitem:aeff41e84aaa1b70df8137cbd05d8ddbe inherit pro_attribs_classHAEntity"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHAEntity.html#aeff41e84aaa1b70df8137cbd05d8ddbe">capacity</a></td></tr>
<tr class="memdesc:aeff41e84aaa1b70df8137cbd05d8ddbe inherit pro_attribs_classHAEntity"><td class="mdescLeft">&#160;</td><td class="mdescRight">JSON object memory reservation length.  <a href="classHAEntity.html#aeff41e84aaa1b70df8137cbd05d8ddbe">More...</a><br /></td></tr>
<tr class="separator:aeff41e84aaa1b70df8137cbd05d8ddbe inherit pro_attribs_classHAEntity"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c9d02fb762b3af1739ba632479473d5 inherit pro_attribs_classHAEntity"><td class="memItemLeft" align="right" valign="top"><a class="el" href="haEntity_8h.html#aa0743062e1533ced64df39be6177d76d">haDeviceType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHAEntity.html#a8c9d02fb762b3af1739ba632479473d5">deviceType</a> = <a class="el" href="haEntity_8h.html#aa0743062e1533ced64df39be6177d76da605159e8a4c32319fd69b5d151369d93">UNDEFINED</a></td></tr>
<tr class="memdesc:a8c9d02fb762b3af1739ba632479473d5 inherit pro_attribs_classHAEntity"><td class="mdescLeft">&#160;</td><td class="mdescRight">HomeAssistant entity device type.  <a href="classHAEntity.html#a8c9d02fb762b3af1739ba632479473d5">More...</a><br /></td></tr>
<tr class="separator:a8c9d02fb762b3af1739ba632479473d5 inherit pro_attribs_classHAEntity"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadb3c5676c00fc0c8b3939888e408d2b inherit pro_attribs_classHAEntity"><td class="memItemLeft" align="right" valign="top">DynamicJsonDocument *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHAEntity.html#aadb3c5676c00fc0c8b3939888e408d2b">entityConfig</a></td></tr>
<tr class="memdesc:aadb3c5676c00fc0c8b3939888e408d2b inherit pro_attribs_classHAEntity"><td class="mdescLeft">&#160;</td><td class="mdescRight">JSON object to be sent to gateway.  <a href="classHAEntity.html#aadb3c5676c00fc0c8b3939888e408d2b">More...</a><br /></td></tr>
<tr class="separator:aadb3c5676c00fc0c8b3939888e408d2b inherit pro_attribs_classHAEntity"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The mqtt switch platform lets you control your MQTT enabled switches. In an ideal scenario, the MQTT device will have a state_topic to publish state changes. If these messages are published with a RETAIN flag, the MQTT switch will receive an instant state update after subscription, and will start with the correct state. Otherwise, the initial state of the switch will be false / off.</p>
<p>When a state_topic is not available, the switch will work in optimistic mode. In this mode, the switch will immediately change state after every command. Otherwise, the switch will wait for state confirmation from the device (message from state_topic).</p>
<p>Optimistic mode can be forced, even if the state_topic is available. Try to enable it, if experiencing incorrect switch operation.</p>
<p><a href="https://www.home-assistant.io/integrations/switch.mqtt/">https://www.home-assistant.io/integrations/switch.mqtt/</a></p>
<p>An example of switch discovery message may be like this:</p>
<p>Topic: homeassistant/switch/lights_switch/config</p>
<p>Payload:</p>
<p>{ "name":"light_switch", // string (optional) The name of the device "unique_id":"light_switch", // string (optional) An ID that uniquely identifies this switch device. If two switches have the same unique ID, // Home Assistant will raise an exception "command_topic":"EnigmaIOT/light/set/data", // string (optional) The MQTT topic to publish commands to change the switch state "payload_off":"{\"cmd":"swi","swi":0}", // string (optional, default: OFF) The payload that represents off state. If specified, will be used for both // comparing to the value in the state_topic (see value_template and state_off for details) and sending as off command to the command_topic "payload_on":"{\"cmd":"swi","swi":1}", // string (optional, default: ON) The payload that represents on state. If specified, will be used for both comparing to the value in the // state_topic (see value_template and state_on for details) and sending as on command to the command_topic "state_topic":"EnigmaIOT/light/data", // string (optional) The MQTT topic subscribed to receive state updates "state_off":0, // string (optional) The payload that represents the off state. Used when value that represents off state in the state_topic is different // from value that should be sent to the command_topic to turn the device off. Default: payload_off if defined, else OFF "state_on":1, // string (optional) The payload that represents the on state. Used when value that represents on state in the state_topic is different // from value that should be sent to the command_topic to turn the device on. Default: payload_on if defined, else ON "value_template":"{{value_json.swi}}" // string (optional) Defines a template to extract device’s state from the state_topic. To determine the switches’s state result of this // template will be compared to state_on and state_off "json_attributes_template":"{{value_json | tojson}}", // template (optional) Defines a template to extract the JSON dictionary from messages received on the json_attributes_topic. // Usage example can be found in MQTT sensor documentation "json_attributes_topic":"EnigmaIOT/light/data", // string (optional) The MQTT topic subscribed to receive a JSON dictionary payload and then set as sensor attributes. // Usage example can be found in MQTT sensor documentation }</p>
<p>Template message for switch is this</p>
<p>Topic: homeassistant/switch/&lt;node_name&gt;_&lt;name_suffix&gt;/config</p>
<p>Payload</p>
<div class="fragment"><div class="line"> {</div>
<div class="line">   <span class="stringliteral">&quot;name&quot;</span>:<span class="stringliteral">&quot;&lt;node_name&gt;_&lt;name_suffix&gt;&quot;</span>,</div>
<div class="line">   <span class="stringliteral">&quot;unique_id&quot;</span>:<span class="stringliteral">&quot;&lt;node_name&gt;_&lt;name_suffix&gt;&quot;</span>,</div>
<div class="line">   <span class="stringliteral">&quot;command_topic&quot;</span>:<span class="stringliteral">&quot;&lt;network_name&gt;/&lt;node_name&gt;/set/data&quot;</span></div>
<div class="line">   <span class="stringliteral">&quot;payload_off&quot;</span>:<span class="stringliteral">&quot;&lt;cmd_payload_on&gt;&quot;</span>,</div>
<div class="line">   <span class="stringliteral">&quot;payload_on&quot;</span>:<span class="stringliteral">&quot;&lt;cmd_payload_off&gt;&quot;</span></div>
<div class="line">   <span class="stringliteral">&quot;state_topic&quot;</span>:<span class="stringliteral">&quot;&lt;network_name&gt;/&lt;node_name&gt;/data&quot;</span>,</div>
<div class="line">   <span class="stringliteral">&quot;state_off&quot;</span>:<span class="stringliteral">&quot;&lt;state_off&gt;&quot;</span>,</div>
<div class="line">   <span class="stringliteral">&quot;state_on&quot;</span>:<span class="stringliteral">&quot;&lt;state_on&gt;&quot;</span>,</div>
<div class="line">   <span class="stringliteral">&quot;value_template&quot;</span>:<span class="stringliteral">&quot;{{value_json.&lt;value_field&gt;}}&quot;</span></div>
<div class="line">   <span class="stringliteral">&quot;json_attributes_template&quot;</span>:<span class="stringliteral">&quot;{{value_json | tojson}}&quot;</span>,</div>
<div class="line">   <span class="stringliteral">&quot;json_attributes_topic&quot;</span>:<span class="stringliteral">&quot;&lt;network_name&gt;/&lt;node_name&gt;/data&quot;</span>,</div>
<div class="line">}</div>
</div><!-- fragment --><p>Message to gateway is like following</p>
<div class="fragment"><div class="line">{</div>
<div class="line">   <span class="stringliteral">&quot;nmsfx&quot;</span>:&lt;name_suffix&gt;,</div>
<div class="line">   <span class="stringliteral">&quot;pl_on&quot;</span>:&lt;cmd_payload_on&gt;,</div>
<div class="line">   <span class="stringliteral">&quot;pl_off&quot;</span>:&lt;cmd_payload_off&gt;,</div>
<div class="line">   <span class="stringliteral">&quot;stat_on&quot;</span>:&lt;state_on&gt;,</div>
<div class="line">   <span class="stringliteral">&quot;stat_off&quot;</span>:&lt;state_off&gt;,</div>
<div class="line">   <span class="stringliteral">&quot;val&quot;</span>:&lt;value_field&gt;</div>
<div class="line">}</div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="haSwitch_8h_source.html#l00094">94</a> of file <a class="el" href="haSwitch_8h_source.html">haSwitch.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a282ac7ec44e7fc43d0d6493808e68ba3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a282ac7ec44e7fc43d0d6493808e68ba3">&#9670;&nbsp;</a></span>HASwitch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">HASwitch::HASwitch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Switch constructor. </p>

<p class="definition">Definition at line <a class="el" href="haSwitch_8h_source.html#l00100">100</a> of file <a class="el" href="haSwitch_8h_source.html">haSwitch.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6f1fba7f12792a5a622de9db17cd2bc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f1fba7f12792a5a622de9db17cd2bc9">&#9670;&nbsp;</a></span>getDiscoveryJson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t HASwitch::getDiscoveryJson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>nodeName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>networkName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DynamicJsonDocument *&#160;</td>
          <td class="paramname"><em>inputJSON</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allows Gateway to get Home Assistant discovery message using Switch template. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Buffer to hold message string </td></tr>
    <tr><td class="paramname">buflen</td><td>Buffer size </td></tr>
    <tr><td class="paramname">nodeName</td><td>Originating node name </td></tr>
    <tr><td class="paramname">networkName</td><td>EnigmaIOT network name </td></tr>
    <tr><td class="paramname">inputJSON</td><td>JSON object sent by node with needed data to fill template in </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Discovery message payload </dd></dl>
<p>msgPack || !len</p>

<p class="definition">Definition at line <a class="el" href="haSwitch_8cpp_source.html#l00085">85</a> of file <a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a>.</p>

</div>
</div>
<a id="ad34555ca78f7d9c9ccd49139751ed831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad34555ca78f7d9c9ccd49139751ed831">&#9670;&nbsp;</a></span>setPayloadOff() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HASwitch::setPayloadOff </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The payload that represents off state. If specified, will be used for both comparing to the value in the state_topic (see value_template and state_off for details) and sending as on command to the command_topic <a href="https://www.home-assistant.io/integrations/switch.mqtt/#payload_off">https://www.home-assistant.io/integrations/switch.mqtt/#payload_off</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td>ON state string </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="haSwitch_8cpp_source.html#l00020">20</a> of file <a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a>.</p>

</div>
</div>
<a id="ad87f7ed8d117684176195abb75de10fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad87f7ed8d117684176195abb75de10fd">&#9670;&nbsp;</a></span>setPayloadOff() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HASwitch::setPayloadOff </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The payload that represents off state. If specified, will be used for both comparing to the value in the state_topic (see value_template and state_off for details) and sending as on command to the command_topic <a href="https://www.home-assistant.io/integrations/switch.mqtt/#payload_off">https://www.home-assistant.io/integrations/switch.mqtt/#payload_off</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td>ON state string </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="haSwitch_8cpp_source.html#l00030">30</a> of file <a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a>.</p>

</div>
</div>
<a id="a58d4755d08863514f81805d29d96605b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58d4755d08863514f81805d29d96605b">&#9670;&nbsp;</a></span>setPayloadOn() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HASwitch::setPayloadOn </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The payload that represents on state. If specified, will be used for both comparing to the value in the state_topic (see value_template and state_on for details) and sending as on command to the command_topic <a href="https://www.home-assistant.io/integrations/switch.mqtt/#payload_on">https://www.home-assistant.io/integrations/switch.mqtt/#payload_on</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td>ON state string </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="haSwitch_8cpp_source.html#l00014">14</a> of file <a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a>.</p>

</div>
</div>
<a id="adb657f3c1e7a6d0dd201ae1ae58c4c61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb657f3c1e7a6d0dd201ae1ae58c4c61">&#9670;&nbsp;</a></span>setPayloadOn() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HASwitch::setPayloadOn </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The payload that represents on state. If specified, will be used for both comparing to the value in the state_topic (see value_template and state_on for details) and sending as on command to the command_topic <a href="https://www.home-assistant.io/integrations/switch.mqtt/#payload_on">https://www.home-assistant.io/integrations/switch.mqtt/#payload_on</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td>ON state integer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="haSwitch_8cpp_source.html#l00026">26</a> of file <a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a>.</p>

</div>
</div>
<a id="a8498809d5a4ba56039c8397e1c22f272"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8498809d5a4ba56039c8397e1c22f272">&#9670;&nbsp;</a></span>setStateOff() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HASwitch::setStateOff </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The payload that represents the off state. Used when value that represents off state in the state_topic is different from value that should be sent to the command_topic to turn the device off <a href="https://www.home-assistant.io/integrations/switch.mqtt/#state_off">https://www.home-assistant.io/integrations/switch.mqtt/#state_off</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td>ON state integer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="haSwitch_8cpp_source.html#l00040">40</a> of file <a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a>.</p>

</div>
</div>
<a id="a92d97f25fd24278191e3ded747f1eac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92d97f25fd24278191e3ded747f1eac9">&#9670;&nbsp;</a></span>setStateOff() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HASwitch::setStateOff </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The payload that represents the off state. Used when value that represents off state in the state_topic is different from value that should be sent to the command_topic to turn the device off <a href="https://www.home-assistant.io/integrations/switch.mqtt/#state_off">https://www.home-assistant.io/integrations/switch.mqtt/#state_off</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td>ON state integer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="haSwitch_8cpp_source.html#l00050">50</a> of file <a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a>.</p>

</div>
</div>
<a id="aa59604bf62e63caaf3dcd6a2ad67814f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa59604bf62e63caaf3dcd6a2ad67814f">&#9670;&nbsp;</a></span>setStateOn() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HASwitch::setStateOn </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The payload that represents the on state. Used when value that represents on state in the state_topic is different from value that should be sent to the command_topic to turn the device on <a href="https://www.home-assistant.io/integrations/switch.mqtt/#state_on">https://www.home-assistant.io/integrations/switch.mqtt/#state_on</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td>ON state integer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="haSwitch_8cpp_source.html#l00034">34</a> of file <a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a>.</p>

</div>
</div>
<a id="a8a83e4675f294b203737539245e13c34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a83e4675f294b203737539245e13c34">&#9670;&nbsp;</a></span>setStateOn() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HASwitch::setStateOn </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The payload that represents the on state. Used when value that represents on state in the state_topic is different from value that should be sent to the command_topic to turn the device on <a href="https://www.home-assistant.io/integrations/switch.mqtt/#state_on">https://www.home-assistant.io/integrations/switch.mqtt/#state_on</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td>ON state integer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="haSwitch_8cpp_source.html#l00046">46</a> of file <a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a>.</p>

</div>
</div>
<a id="a237b5b70434642df1031dac738955634"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a237b5b70434642df1031dac738955634">&#9670;&nbsp;</a></span>setValueField()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HASwitch::setValueField </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines a json key to extract device’s state from the state_topic. To determine the switches’s state result of this template will be compared to state_on and state_off <a href="https://www.home-assistant.io/integrations/switch.mqtt/#value_template">https://www.home-assistant.io/integrations/switch.mqtt/#value_template</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td>ON state value </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="haSwitch_8cpp_source.html#l00054">54</a> of file <a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="haSwitch_8h_source.html">haSwitch.h</a></li>
<li>src/<a class="el" href="haSwitch_8cpp_source.html">haSwitch.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
